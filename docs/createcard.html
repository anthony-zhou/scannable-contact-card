<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="vendor/qrcode.min.js"></script>
  <title>Document</title>
</head>
<body>

  <form action="/action_page.php">
    <label for="fname">First name:</label><br>
    <input type="text" id="fname" name="fname" value="John"><br>
    <label for="lname">Last name:</label><br>
    <input type="text" id="lname" name="lname" value="Doe"><br><br>
    <input type="submit" value="Submit">
  </form> 

  <div id="qrcode"></div>

  <script>
    const data = {
      firstName: 'Anthony',
      lastName: 'Zhou',
      phoneNumber: '16822289135',
      emailAddress: 'anthonywhatever@gmail.com'
    }
    const timestamp = new Date().toISOString();

    // const BASE_URL = 'file:///Users/anthony/Documents/GitHub/scannable-contact-card/docs/';
    const BASE_URL = 'https://anthony-zhou.github.io/scannable-contact-card';
    const vcfContent = `BEGIN:VCARD
VERSION:3.0
N:${data.lastName};${data.firstName}
TEL;TYPE=MOBILE,VOICE:${data.phoneNumber}
EMAIL:${data.emailAddress}
REV:${timestamp}
END:VCARD`;
    const qrCodeElement = document.getElementById('qrcode');
    const contactUrl = `${BASE_URL}/?vcfContent=${encodeURIComponent(vcfContent)}`;
    console.log(encodeURIComponent(vcfContent));
    console.log(contactUrl);
    new QRCode(qrCodeElement, contactUrl);
  </script>
</body>
</html>